{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nfunction MyCoursesComponent_div_3_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"div\", 7);\n    i0.ɵɵelement(2, \"img\", 8);\n    i0.ɵɵelementStart(3, \"div\", 9)(4, \"h5\", 10);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 11);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\", 12);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"p\");\n    i0.ɵɵtext(11, \"Status: \");\n    i0.ɵɵelementStart(12, \"span\", 13);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"p\");\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function MyCoursesComponent_div_3_div_1_Template_button_click_16_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const course_r4 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.deleteCourse(course_r4.courseId));\n    });\n    i0.ɵɵtext(17, \" Delete \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const course_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"alt\", course_r4.name);\n    i0.ɵɵproperty(\"src\", course_r4.image || \"https://via.placeholder.com/300x180\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(course_r4.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(course_r4.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\u20B9\", course_r4.price, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(course_r4.status);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Progress: \", course_r4.progress, \"%\");\n  }\n}\nfunction MyCoursesComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtemplate(1, MyCoursesComponent_div_3_div_1_Template, 18, 7, \"div\", 5);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.myCourses);\n  }\n}\nfunction MyCoursesComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtext(1, \" You have not enrolled in any courses yet. \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class MyCoursesComponent {\n  constructor(http) {\n    this.http = http;\n    this.myCourses = [];\n  }\n  ngOnInit() {\n    const user = JSON.parse(localStorage.getItem('loggedInUser') || '{}');\n    if (!user.email) {\n      alert(\"Please log in first.\");\n      return;\n    }\n    // ✅ Fetch latest user from backend (not localStorage)\n    this.http.get(`http://localhost:3000/users?email=${user.email}`).subscribe(users => {\n      if (users.length > 0) {\n        this.myCourses = users[0].myCourses || [];\n        console.log('Fetched myCourses from API:', this.myCourses);\n      } else {\n        alert(\"User not found.\");\n      }\n    });\n  }\n  // ✅ Delete course from local list and localStorage\n  deleteCourse(courseId) {\n    if (confirm('Are you sure you want to delete this course?')) {\n      const user = JSON.parse(localStorage.getItem('loggedInUser') || '{}');\n      let allEnrollments = JSON.parse(localStorage.getItem('enrolledCourses') || '[]');\n      // ❌ Remove the course for this user only\n      allEnrollments = allEnrollments.filter(course => !(course.courseId === courseId && course.userEmail === user.email));\n      // ✅ Update localStorage\n      localStorage.setItem('enrolledCourses', JSON.stringify(allEnrollments));\n      // ✅ Update myCourses list for UI\n      this.myCourses = this.myCourses.filter(course => course.courseId !== courseId);\n    }\n  }\n  static {\n    this.ɵfac = function MyCoursesComponent_Factory(t) {\n      return new (t || MyCoursesComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: MyCoursesComponent,\n      selectors: [[\"app-my-courses\"]],\n      decls: 6,\n      vars: 2,\n      consts: [[1, \"container\", \"mt-4\"], [1, \"text-center\", \"mb-4\"], [\"class\", \"row\", 4, \"ngIf\", \"ngIfElse\"], [\"noCourses\", \"\"], [1, \"row\"], [\"class\", \"col-md-4 mb-4\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-md-4\", \"mb-4\"], [1, \"card\", \"h-100\", \"shadow-sm\"], [1, \"card-img-top\", 2, \"height\", \"180px\", \"object-fit\", \"cover\", 3, \"src\", \"alt\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"card-text\", \"text-muted\", \"small\"], [1, \"fw-bold\", \"text-primary\"], [1, \"badge\", \"bg-success\"], [1, \"btn\", \"btn-danger\", \"mt-2\", 3, \"click\"], [1, \"alert\", \"alert-info\", \"text-center\"]],\n      template: function MyCoursesComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\", 1);\n          i0.ɵɵtext(2, \"My Enrolled Courses\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(3, MyCoursesComponent_div_3_Template, 2, 1, \"div\", 2);\n          i0.ɵɵtemplate(4, MyCoursesComponent_ng_template_4_Template, 2, 0, \"ng-template\", null, 3, i0.ɵɵtemplateRefExtractor);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          const _r1 = i0.ɵɵreference(5);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.myCourses.length > 0)(\"ngIfElse\", _r1);\n        }\n      },\n      dependencies: [i2.NgForOf, i2.NgIf],\n      styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵlistener","MyCoursesComponent_div_3_div_1_Template_button_click_16_listener","restoredCtx","ɵɵrestoreView","_r7","course_r4","$implicit","ctx_r6","ɵɵnextContext","ɵɵresetView","deleteCourse","courseId","ɵɵadvance","ɵɵpropertyInterpolate","name","ɵɵproperty","image","ɵɵsanitizeUrl","ɵɵtextInterpolate","description","ɵɵtextInterpolate1","price","status","progress","ɵɵtemplate","MyCoursesComponent_div_3_div_1_Template","ctx_r0","myCourses","MyCoursesComponent","constructor","http","ngOnInit","user","JSON","parse","localStorage","getItem","email","alert","get","subscribe","users","length","console","log","confirm","allEnrollments","filter","course","userEmail","setItem","stringify","ɵɵdirectiveInject","i1","HttpClient","selectors","decls","vars","consts","template","MyCoursesComponent_Template","rf","ctx","MyCoursesComponent_div_3_Template","MyCoursesComponent_ng_template_4_Template","ɵɵtemplateRefExtractor","_r1"],"sources":["C:\\Users\\rocks\\OneDrive\\Desktop\\Angular\\AngularForm\\src\\app\\Components\\my-courses\\my-courses.component.ts","C:\\Users\\rocks\\OneDrive\\Desktop\\Angular\\AngularForm\\src\\app\\Components\\my-courses\\my-courses.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\n@Component({\n  selector: 'app-my-courses',\n  templateUrl: './my-courses.component.html',\n  styleUrls: ['./my-courses.component.css']\n})\nexport class MyCoursesComponent implements OnInit {\n  myCourses: any[] = [];\n\n  constructor(private http: HttpClient) { }\n\n  ngOnInit(): void {\n    const user = JSON.parse(localStorage.getItem('loggedInUser') || '{}');\n\n    if (!user.email) {\n      alert(\"Please log in first.\");\n      return;\n    }\n\n    // ✅ Fetch latest user from backend (not localStorage)\n    this.http.get<any[]>(`http://localhost:3000/users?email=${user.email}`).subscribe(users => {\n      if (users.length > 0) {\n        this.myCourses = users[0].myCourses || [];\n        console.log('Fetched myCourses from API:', this.myCourses);\n      } else {\n        alert(\"User not found.\");\n      }\n    });\n  }\n\n  // ✅ Delete course from local list and localStorage\n  deleteCourse(courseId: number): void {\n    if (confirm('Are you sure you want to delete this course?')) {\n      const user = JSON.parse(localStorage.getItem('loggedInUser') || '{}');\n      let allEnrollments = JSON.parse(localStorage.getItem('enrolledCourses') || '[]');\n\n      // ❌ Remove the course for this user only\n      allEnrollments = allEnrollments.filter((course: any) =>\n        !(course.courseId === courseId && course.userEmail === user.email)\n      );\n\n      // ✅ Update localStorage\n      localStorage.setItem('enrolledCourses', JSON.stringify(allEnrollments));\n\n      // ✅ Update myCourses list for UI\n      this.myCourses = this.myCourses.filter(course => course.courseId !== courseId);\n    }\n  }\n}\n\n","<div class=\"container mt-4\">\n    <h2 class=\"text-center mb-4\">My Enrolled Courses</h2>\n\n    <!-- Show enrolled courses -->\n    <div class=\"row\" *ngIf=\"myCourses.length > 0; else noCourses\">\n        <div class=\"col-md-4 mb-4\" *ngFor=\"let course of myCourses;let i = index\">\n            <div class=\"card h-100 shadow-sm\">\n                <img [src]=\"course.image || 'https://via.placeholder.com/300x180'\" class=\"card-img-top\"\n                    alt=\"{{ course.name }}\" style=\"height: 180px; object-fit: cover;\">\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">{{ course.name }}</h5>\n                    <p class=\"card-text text-muted small\">{{ course.description }}</p>\n                    <p class=\"fw-bold text-primary\">₹{{ course.price }}</p>\n                    <p>Status: <span class=\"badge bg-success\">{{ course.status }}</span></p>\n                    <p>Progress: {{ course.progress }}%</p>\n                    <!-- ✅ Delete Button -->\n                    <button class=\"btn btn-danger mt-2\" (click)=\"deleteCourse(course.courseId)\">\n                        Delete\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- No enrolled courses -->\n    <ng-template #noCourses>\n        <div class=\"alert alert-info text-center\">\n            You have not enrolled in any courses yet.\n        </div>\n    </ng-template>\n</div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}