{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nfunction MycourseComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\")(1, \"p\", 4);\n    i0.ÉµÉµtext(2, \"No courses enrolled yet.\");\n    i0.ÉµÉµelementEnd()();\n  }\n}\nfunction MycourseComponent_div_4_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"div\", 7)(1, \"div\", 8);\n    i0.ÉµÉµelement(2, \"img\", 9);\n    i0.ÉµÉµelementStart(3, \"div\", 10)(4, \"h5\", 11);\n    i0.ÉµÉµtext(5);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(6, \"p\", 12);\n    i0.ÉµÉµtext(7);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(8, \"p\", 13);\n    i0.ÉµÉµtext(9);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(10, \"button\", 14);\n    i0.ÉµÉµlistener(\"click\", function MycourseComponent_div_4_div_1_Template_button_click_10_listener() {\n      const restoredCtx = i0.ÉµÉµrestoreView(_r5);\n      const course_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ÉµÉµnextContext(2);\n      return i0.ÉµÉµresetView(ctx_r4.deleteCourse(course_r3.id));\n    });\n    i0.ÉµÉµtext(11, \"Delete\");\n    i0.ÉµÉµelementEnd()()()();\n  }\n  if (rf & 2) {\n    const course_r3 = ctx.$implicit;\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµproperty(\"src\", course_r3.image, i0.ÉµÉµsanitizeUrl);\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµtextInterpolate(course_r3.name);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(course_r3.description);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate1(\"\\u20B9\", course_r3.price, \"\");\n  }\n}\nfunction MycourseComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 5);\n    i0.ÉµÉµtemplate(1, MycourseComponent_div_4_div_1_Template, 12, 4, \"div\", 6);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"ngForOf\", ctx_r1.myCourses);\n  }\n}\nexport class MycourseComponent {\n  constructor(http) {\n    this.http = http;\n    this.myCourses = [];\n  }\n  ngOnInit() {\n    const user = JSON.parse(localStorage.getItem('loggedInUser') || '{}');\n    const allEnrollments = JSON.parse(localStorage.getItem('enrolledCourses') || '[]');\n    if (user && user.email) {\n      this.myCourses = allEnrollments.filter(course => course.userEmail === user.email);\n    } else {\n      alert(\"Please log in to view your courses.\");\n    }\n  }\n  deleteCourse(courseName) {\n    const user = JSON.parse(localStorage.getItem('loggedInUser') || '{}');\n    if (!user || !user.id) {\n      alert('User not found.');\n      return;\n    }\n    if (confirm('Are you sure you want to delete this course?')) {\n      // Get the user from JSON server\n      this.http.get(`http://localhost:3000/users/${user.id}`).subscribe(userData => {\n        // Filter out the course to delete\n        const updatedCourses = userData.myCourses.filter(course => course.name !== courseName);\n        // Update user with new myCourses\n        const updatedUser = {\n          ...userData,\n          myCourses: updatedCourses\n        };\n        // Save updated user to JSON server\n        this.http.put(`http://localhost:3000/users/${user.id}`, updatedUser).subscribe(() => {\n          this.myCourses = updatedCourses;\n          alert('Course deleted successfully!');\n        }, error => {\n          console.error('Failed to update user', error);\n          alert('Failed to delete course.');\n        });\n      });\n    }\n  }\n  static {\n    this.Éµfac = function MycourseComponent_Factory(t) {\n      return new (t || MycourseComponent)(i0.ÉµÉµdirectiveInject(i1.HttpClient));\n    };\n  }\n  static {\n    this.Éµcmp = /*@__PURE__*/i0.ÉµÉµdefineComponent({\n      type: MycourseComponent,\n      selectors: [[\"app-mycourse\"]],\n      decls: 5,\n      vars: 2,\n      consts: [[1, \"container\", \"mt-4\"], [1, \"mb-4\"], [4, \"ngIf\"], [\"class\", \"row\", 4, \"ngIf\"], [1, \"text-muted\"], [1, \"row\"], [\"class\", \"col-md-4 mb-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-md-4\", \"mb-3\"], [1, \"card\", \"h-100\", \"shadow-sm\"], [\"height\", \"180\", 1, \"card-img-top\", 3, \"src\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"card-text\"], [1, \"fw-bold\", \"text-primary\"], [1, \"btn\", \"btn-danger\", \"mt-2\", 3, \"click\"]],\n      template: function MycourseComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ÉµÉµelementStart(0, \"div\", 0)(1, \"h3\", 1);\n          i0.ÉµÉµtext(2, \"\\uD83D\\uDCDA My Courses\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµtemplate(3, MycourseComponent_div_3_Template, 3, 0, \"div\", 2);\n          i0.ÉµÉµtemplate(4, MycourseComponent_div_4_Template, 2, 1, \"div\", 3);\n          i0.ÉµÉµelementEnd();\n        }\n        if (rf & 2) {\n          i0.ÉµÉµadvance(3);\n          i0.ÉµÉµproperty(\"ngIf\", ctx.myCourses.length === 0);\n          i0.ÉµÉµadvance(1);\n          i0.ÉµÉµproperty(\"ngIf\", ctx.myCourses.length > 0);\n        }\n      },\n      dependencies: [i2.NgForOf, i2.NgIf],\n      styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"names":["i0","ÉµÉµelementStart","ÉµÉµtext","ÉµÉµelementEnd","ÉµÉµelement","ÉµÉµlistener","MycourseComponent_div_4_div_1_Template_button_click_10_listener","restoredCtx","ÉµÉµrestoreView","_r5","course_r3","$implicit","ctx_r4","ÉµÉµnextContext","ÉµÉµresetView","deleteCourse","id","ÉµÉµadvance","ÉµÉµproperty","image","ÉµÉµsanitizeUrl","ÉµÉµtextInterpolate","name","description","ÉµÉµtextInterpolate1","price","ÉµÉµtemplate","MycourseComponent_div_4_div_1_Template","ctx_r1","myCourses","MycourseComponent","constructor","http","ngOnInit","user","JSON","parse","localStorage","getItem","allEnrollments","email","filter","course","userEmail","alert","courseName","confirm","get","subscribe","userData","updatedCourses","updatedUser","put","error","console","ÉµÉµdirectiveInject","i1","HttpClient","selectors","decls","vars","consts","template","MycourseComponent_Template","rf","ctx","MycourseComponent_div_3_Template","MycourseComponent_div_4_Template","length"],"sources":["C:\\Users\\rocks\\OneDrive\\Desktop\\Angular\\AngularForm\\src\\app\\Components\\user\\Components\\mycourse\\mycourse.component.ts","C:\\Users\\rocks\\OneDrive\\Desktop\\Angular\\AngularForm\\src\\app\\Components\\user\\Components\\mycourse\\mycourse.component.html"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-mycourse',\n  templateUrl: './mycourse.component.html',\n  styleUrls: ['./mycourse.component.css']\n})\nexport class MycourseComponent {\n  myCourses: any[] = [];\n\n  constructor(private http: HttpClient) { }\n\n  ngOnInit(): void {\n    const user = JSON.parse(localStorage.getItem('loggedInUser') || '{}');\n    const allEnrollments = JSON.parse(localStorage.getItem('enrolledCourses') || '[]');\n\n    if (user && user.email) {\n      this.myCourses = allEnrollments.filter((course: any) => course.userEmail === user.email);\n    } else {\n      alert(\"Please log in to view your courses.\");\n    }\n  }\n\n  deleteCourse(courseName: string): void {\n    const user = JSON.parse(localStorage.getItem('loggedInUser') || '{}');\n\n    if (!user || !user.id) {\n      alert('User not found.');\n      return;\n    }\n\n    if (confirm('Are you sure you want to delete this course?')) {\n      // Get the user from JSON server\n      this.http.get<any>(`http://localhost:3000/users/${user.id}`).subscribe(userData => {\n        // Filter out the course to delete\n        const updatedCourses = userData.myCourses.filter((course: any) => course.name !== courseName);\n\n        // Update user with new myCourses\n        const updatedUser = { ...userData, myCourses: updatedCourses };\n\n        // Save updated user to JSON server\n        this.http.put(`http://localhost:3000/users/${user.id}`, updatedUser).subscribe(() => {\n          this.myCourses = updatedCourses;\n          alert('Course deleted successfully!');\n        }, error => {\n          console.error('Failed to update user', error);\n          alert('Failed to delete course.');\n        });\n      });\n    }\n  }\n\n\n}\n\n","<div class=\"container mt-4\">\n    <h3 class=\"mb-4\">ðŸ“š My Courses</h3>\n\n    <div *ngIf=\"myCourses.length === 0\">\n        <p class=\"text-muted\">No courses enrolled yet.</p>\n    </div>\n\n    <div class=\"row\" *ngIf=\"myCourses.length > 0\">\n        <div class=\"col-md-4 mb-3\" *ngFor=\"let course of myCourses\">\n            <div class=\"card h-100 shadow-sm\">\n                <img [src]=\"course.image\" class=\"card-img-top\" height=\"180\">\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">{{ course.name }}</h5>\n                    <p class=\"card-text\">{{ course.description }}</p>\n                    <p class=\"fw-bold text-primary\">â‚¹{{ course.price }}</p>\n                    <button class=\"btn btn-danger mt-2\" (click)=\"deleteCourse(course.id)\">Delete</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}